<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kalkulator Matriks - Tema Gen Z</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
      color: #e0e7ff;
      min-height: 100vh;
    }
    input[type="number"] {
      background-color: #1e293b;
      border: 1.5px solid #64748b;
      color: #cbd5e1;
      transition: border-color 0.3s ease, background-color 0.3s ease;
    }
    input[type="number"]:focus {
      outline: none;
      border-color: #7c3aed;
      background-color: #272f4a;
      color: #e0e7ff;
      box-shadow: 0 0 8px #7c3aed88;
    }
    button {
      font-weight: 600;
      box-shadow: 0 4px 8px rgb(124 58 237 / 0.3);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    button:hover {
      box-shadow: 0 6px 12px rgb(124 58 237 / 0.6);
    }
    #resultContainer {
      background-color: #0f172a;
      border: 1.5px solid #7c3aed;
      box-shadow: 0 0 12px #7c3aedaa inset;
      border-radius: 0.5rem;
      min-height: 120px;
      font-weight: 600;
      font-size: 1.125rem;
      color: #d8b4fe;
      overflow-x: auto;
      padding: 1rem;
    }
    table {
      border-collapse: separate;
      border-spacing: 8px 6px;
      margin: 0 auto;
      user-select: none;
    }
    td {
      background-color: #272f4a;
      border-radius: 0.375rem;
      padding: 0.5rem 1rem;
      min-width: 48px;
      text-align: center;
      font-variant-numeric: tabular-nums;
      color: #d8b4fe;
      box-shadow: 0 2px 6px rgb(124 58 237 / 0.4);
      transition: background-color 0.3s ease;
    }
    td:hover {
      background-color: #3b3f72;
      box-shadow: 0 4px 10px rgb(124 58 237 / 0.7);
      cursor: default;
    }
    h1, h2 {
      text-shadow: 0 0 6px #7c3aedaa;
    }
    label {
      color: #a5b4fc;
      font-weight: 600;
    }
    /* Scrollbar for result container */
    #resultContainer::-webkit-scrollbar {
      height: 8px;
    }
    #resultContainer::-webkit-scrollbar-track {
      background: #0f172a;
    }
    #resultContainer::-webkit-scrollbar-thumb {
      background: #7c3aed;
      border-radius: 4px;
    }
    /* Responsive tweaks */
    @media (max-width: 640px) {
      #matrixAForm, #matrixBForm {
        grid-template-columns: repeat(2, minmax(40px, 1fr)) !important;
      }
      button {
        font-size: 0.875rem;
        padding-left: 0.75rem;
        padding-right: 0.75rem;
      }
    }
  </style>
</head>
<body class="flex flex-col items-center p-6">
  <h1 class="text-4xl font-extrabold mb-8 text-center tracking-wide select-none">Kalkulator Matriks</h1>

  <div class="w-full max-w-5xl bg-gradient-to-br from-[#1e293b] to-[#0f172a] rounded-2xl shadow-2xl p-8 space-y-8 border border-[#7c3aed]">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
      <!-- Matrix A -->
      <section>
        <h2 class="text-2xl font-semibold mb-4 select-none">Matriks A</h2>
        <div class="flex flex-wrap gap-4 items-center mb-4">
          <label for="rowsA" class="block">Baris:</label>
          <input
            type="number"
            id="rowsA"
            min="1"
            max="5"
            value="2"
            class="w-16 p-2 rounded-md"
          />
          <label for="colsA" class="block">Kolom:</label>
          <input
            type="number"
            id="colsA"
            min="1"
            max="5"
            value="2"
            class="w-16 p-2 rounded-md"
          />
          <button
            id="generateA"
            class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-5 py-2 rounded-lg shadow-lg flex items-center space-x-2 select-none"
            aria-label="Buat Matriks A"
          >
            <i class="fas fa-layer-group"></i>
            <span>Buat Matriks</span>
          </button>
        </div>
        <form id="matrixAForm" class="grid grid-cols-2 gap-3"></form>
      </section>

      <!-- Matrix B -->
      <section>
        <h2 class="text-2xl font-semibold mb-4 select-none">Matriks B</h2>
        <div class="flex flex-wrap gap-4 items-center mb-4">
          <label for="rowsB" class="block">Baris:</label>
          <input
            type="number"
            id="rowsB"
            min="1"
            max="5"
            value="2"
            class="w-16 p-2 rounded-md"
          />
          <label for="colsB" class="block">Kolom:</label>
          <input
            type="number"
            id="colsB"
            min="1"
            max="5"
            value="2"
            class="w-16 p-2 rounded-md"
          />
          <button
            id="generateB"
            class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-5 py-2 rounded-lg shadow-lg flex items-center space-x-2 select-none"
            aria-label="Buat Matriks B"
          >
            <i class="fas fa-layer-group"></i>
            <span>Buat Matriks</span>
          </button>
        </div>
        <form id="matrixBForm" class="grid grid-cols-2 gap-3"></form>
      </section>
    </div>

    <div class="flex flex-wrap justify-center gap-5">
      <button
        id="addBtn"
        class="bg-gradient-to-r from-green-500 to-green-700 text-white px-6 py-3 rounded-xl shadow-lg flex items-center space-x-3 select-none hover:brightness-110"
        aria-label="Tambah Matriks A dan B"
      >
        <i class="fas fa-plus text-lg"></i><span>Tambah (A + B)</span>
      </button>
      <button
        id="subtractBtn"
        class="bg-gradient-to-r from-red-500 to-red-700 text-white px-6 py-3 rounded-xl shadow-lg flex items-center space-x-3 select-none hover:brightness-110"
        aria-label="Kurangi Matriks B dari A"
      >
        <i class="fas fa-minus text-lg"></i><span>Kurang (A - B)</span>
      </button>
      <button
        id="multiplyBtn"
        class="bg-gradient-to-r from-purple-500 to-purple-700 text-white px-6 py-3 rounded-xl shadow-lg flex items-center space-x-3 select-none hover:brightness-110"
        aria-label="Kali Matriks A dan B"
      >
        <i class="fas fa-times text-lg"></i><span>Kali (A Ã— B)</span>
      </button>
      <button
        id="transposeABtn"
        class="bg-gradient-to-r from-yellow-400 to-yellow-600 text-gray-900 px-6 py-3 rounded-xl shadow-lg flex items-center space-x-3 select-none hover:brightness-110"
        aria-label="Transpos Matriks A"
      >
        <i class="fas fa-exchange-alt text-lg"></i><span>Transpos Matriks A</span>
      </button>
      <button
        id="transposeBBtn"
        class="bg-gradient-to-r from-yellow-400 to-yellow-600 text-gray-900 px-6 py-3 rounded-xl shadow-lg flex items-center space-x-3 select-none hover:brightness-110"
        aria-label="Transpos Matriks B"
      >
        <i class="fas fa-exchange-alt text-lg"></i><span>Transpos Matriks B</span>
      </button>
      <button
        id="clearBtn"
        class="bg-gradient-to-r from-gray-600 to-gray-800 text-white px-6 py-3 rounded-xl shadow-lg flex items-center space-x-3 select-none hover:brightness-110"
        aria-label="Bersihkan semua input dan hasil"
      >
        <i class="fas fa-trash-alt text-lg"></i><span>Bersihkan</span>
      </button>
    </div>

    <section>
      <h2 class="text-2xl font-semibold mb-4 select-none">Hasil</h2>
      <div id="resultContainer" aria-live="polite" aria-atomic="true">
        <p class="text-center text-gray-400 select-none">Hasil akan muncul di sini</p>
      </div>
    </section>
  </div>

  <script>
    // Utility to create matrix input fields
    function createMatrixInputs(container, rows, cols, matrixId) {
      container.innerHTML = "";
      container.style.gridTemplateColumns = `repeat(${cols}, minmax(40px, 1fr))`;
      for (let r = 0; r < rows; r++) {
        for (let c = 0; c < cols; c++) {
          const input = document.createElement("input");
          input.type = "number";
          input.step = "any";
          input.value = "0";
          input.className =
            "border border-gray-300 rounded p-1 text-center focus:outline-none focus:ring-2 focus:ring-blue-400";
          input.id = `${matrixId}-${r}-${c}`;
          input.setAttribute("aria-label", `Input matriks ${matrixId} baris ${r + 1} kolom ${c + 1}`);
          container.appendChild(input);
        }
      }
    }

    // Read matrix values from inputs
    function readMatrix(rows, cols, matrixId) {
      const matrix = [];
      for (let r = 0; r < rows; r++) {
        const row = [];
        for (let c = 0; c < cols; c++) {
          const val = parseFloat(document.getElementById(`${matrixId}-${r}-${c}`).value);
          row.push(isNaN(val) ? 0 : val);
        }
        matrix.push(row);
      }
      return matrix;
    }

    // Render matrix as HTML table
    function renderMatrix(matrix) {
      if (!matrix.length) return "<p class='text-gray-500 text-center'>Matriks kosong</p>";
      let html = '<table class="table-auto mx-auto border-collapse border border-transparent">';
      for (const row of matrix) {
        html += '<tr>';
        for (const val of row) {
          html += `<td>${val}</td>`;
        }
        html += '</tr>';
      }
      html += '</table>';
      return html;
    }

    // Matrix operations
    function addMatrices(A, B) {
      if (A.length !== B.length || A[0].length !== B[0].length) return null;
      const rows = A.length;
      const cols = A[0].length;
      const result = [];
      for (let r = 0; r < rows; r++) {
        const row = [];
        for (let c = 0; c < cols; c++) {
          row.push(A[r][c] + B[r][c]);
        }
        result.push(row);
      }
      return result;
    }

    function subtractMatrices(A, B) {
      if (A.length !== B.length || A[0].length !== B[0].length) return null;
      const rows = A.length;
      const cols = A[0].length;
      const result = [];
      for (let r = 0; r < rows; r++) {
        const row = [];
        for (let c = 0; c < cols; c++) {
          row.push(A[r][c] - B[r][c]);
        }
        result.push(row);
      }
      return result;
    }

    function multiplyMatrices(A, B) {
      if (A[0].length !== B.length) return null;
      const rows = A.length;
      const cols = B[0].length;
      const result = [];
      for (let r = 0; r < rows; r++) {
        const row = [];
        for (let c = 0; c < cols; c++) {
          let sum = 0;
          for (let k = 0; k < A[0].length; k++) {
            sum += A[r][k] * B[k][c];
          }
          row.push(sum);
        }
        result.push(row);
      }
      return result;
    }

    function transposeMatrix(M) {
      const rows = M.length;
      const cols = M[0].length;
      const result = [];
      for (let c = 0; c < cols; c++) {
        const row = [];
        for (let r = 0; r < rows; r++) {
          row.push(M[r][c]);
        }
        result.push(row);
      }
      return result;
    }

    // Elements
    const rowsAInput = document.getElementById("rowsA");
    const colsAInput = document.getElementById("colsA");
    const generateABtn = document.getElementById("generateA");
    const matrixAForm = document.getElementById("matrixAForm");

    const rowsBInput = document.getElementById("rowsB");
    const colsBInput = document.getElementById("colsB");
    const generateBBtn = document.getElementById("generateB");
    const matrixBForm = document.getElementById("matrixBForm");

    const addBtn = document.getElementById("addBtn");
    const subtractBtn = document.getElementById("subtractBtn");
    const multiplyBtn = document.getElementById("multiplyBtn");
    const transposeABtn = document.getElementById("transposeABtn");
    const transposeBBtn = document.getElementById("transposeBBtn");
    const clearBtn = document.getElementById("clearBtn");

    const resultContainer = document.getElementById("resultContainer");

    // Initial generate matrices
    createMatrixInputs(matrixAForm, parseInt(rowsAInput.value), parseInt(colsAInput.value), "A");
    createMatrixInputs(matrixBForm, parseInt(rowsBInput.value), parseInt(colsBInput.value), "B");

    // Generate matrix A inputs on button click
    generateABtn.addEventListener("click", () => {
      let rows = parseInt(rowsAInput.value);
      let cols = parseInt(colsAInput.value);
      if (rows < 1) rows = 1;
      if (cols < 1) cols = 1;
      if (rows > 5) rows = 5;
      if (cols > 5) cols = 5;
      rowsAInput.value = rows;
      colsAInput.value = cols;
      createMatrixInputs(matrixAForm, rows, cols, "A");
      resultContainer.innerHTML = "<p class='text-gray-400 text-center select-none'>Hasil akan muncul di sini</p>";
    });

    // Generate matrix B inputs on button click
    generateBBtn.addEventListener("click", () => {
      let rows = parseInt(rowsBInput.value);
      let cols = parseInt(colsBInput.value);
      if (rows < 1) rows = 1;
      if (cols < 1) cols = 1;
      if (rows > 5) rows = 5;
      if (cols > 5) cols = 5;
      rowsBInput.value = rows;
      colsBInput.value = cols;
      createMatrixInputs(matrixBForm, rows, cols, "B");
      resultContainer.innerHTML = "<p class='text-gray-400 text-center select-none'>Hasil akan muncul di sini</p>";
    });

    // Add matrices
    addBtn.addEventListener("click", () => {
      const rowsA = parseInt(rowsAInput.value);
      const colsA = parseInt(colsAInput.value);
      const rowsB = parseInt(rowsBInput.value);
      const colsB = parseInt(colsBInput.value);

      if (rowsA !== rowsB || colsA !== colsB) {
        resultContainer.innerHTML =
          '<p class="text-red-500 font-semibold text-center select-none">Error: Matriks harus memiliki ukuran yang sama untuk penjumlahan.</p>';
        return;
      }

      const A = readMatrix(rowsA, colsA, "A");
      const B = readMatrix(rowsB, colsB, "B");
      const result = addMatrices(A, B);
      resultContainer.innerHTML = renderMatrix(result);
    });

    // Subtract matrices
    subtractBtn.addEventListener("click", () => {
      const rowsA = parseInt(rowsAInput.value);
      const colsA = parseInt(colsAInput.value);
      const rowsB = parseInt(rowsBInput.value);
      const colsB = parseInt(colsBInput.value);

      if (rowsA !== rowsB || colsA !== colsB) {
        resultContainer.innerHTML =
          '<p class="text-red-500 font-semibold text-center select-none">Error: Matriks harus memiliki ukuran yang sama untuk pengurangan.</p>';
        return;
      }

      const A = readMatrix(rowsA, colsA, "A");
      const B = readMatrix(rowsB, colsB, "B");
      const result = subtractMatrices(A, B);
      resultContainer.innerHTML = renderMatrix(result);
    });

    // Multiply matrices
    multiplyBtn.addEventListener("click", () => {
      const rowsA = parseInt(rowsAInput.value);
      const colsA = parseInt(colsAInput.value);
      const rowsB = parseInt(rowsBInput.value);
      const colsB = parseInt(colsBInput.value);

      if (colsA !== rowsB) {
        resultContainer.innerHTML =
          '<p class="text-red-500 font-semibold text-center select-none">Error: Kolom matriks A harus sama dengan baris matriks B untuk perkalian.</p>';
        return;
      }

      const A = readMatrix(rowsA, colsA, "A");
      const B = readMatrix(rowsB, colsB, "B");
      const result = multiplyMatrices(A, B);
      resultContainer.innerHTML = renderMatrix(result);
    });

    // Transpose matrix A
    transposeABtn.addEventListener("click", () => {
      const rowsA = parseInt(rowsAInput.value);
      const colsA = parseInt(colsAInput.value);
      const A = readMatrix(rowsA, colsA, "A");
      const result = transposeMatrix(A);
      resultContainer.innerHTML = renderMatrix(result);
    });

    // Transpose matrix B
    transposeBBtn.addEventListener("click", () => {
      const rowsB = parseInt(rowsBInput.value);
      const colsB = parseInt(colsBInput.value);
      const B = readMatrix(rowsB, colsB, "B");
      const result = transposeMatrix(B);
      resultContainer.innerHTML = renderMatrix(result);
    });

    // Clear all inputs and result
    clearBtn.addEventListener("click", () => {
      rowsAInput.value = 2;
      colsAInput.value = 2;
      rowsBInput.value = 2;
      colsBInput.value = 2;
      createMatrixInputs(matrixAForm, 2, 2, "A");
      createMatrixInputs(matrixBForm, 2, 2, "B");
      resultContainer.innerHTML = "<p class='text-gray-400 text-center select-none'>Hasil akan muncul di sini</p>";
    });
  </script>
</body>
</html>
